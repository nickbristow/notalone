$(document).ready(function(){var e=L.AwesomeMarkers.icon({icon:"glyphicon-star",markerColor:"red"}),o=L.map("map",{scrollWheelZoom:!1}).setView([39.8282,-98.5795],4);L.tileLayer("https://otile{s}-s.mqcdn.com/tiles/1.0.0/map/{z}/{x}/{y}.jpg",{attribution:'Tiles Courtesy of <a href="http://www.mapquest.com/" target="_blank">MapQuest</a>',maxZoom:18,subdomains:[1,2,3,4]}).addTo(o),$("#service-locator-form").on("submit",function(t){t.preventDefault(),$(".status").remove();var s=$("#service-locator-form #zipcode").val();if($(".service-locator-results").remove(),$(".service-locator-guide").append('<div class="service-locator-results"></div>'),s){$(".service-locator-map").prepend("<div class='status loading'><span class='glyphicon glyphicon-refresh'></span> Loading</div>");var i="",a="",l=[];$.getJSON("//maps.googleapis.com/maps/api/geocode/json?address="+s+"&sensor=false").done(function(e){i=e.results[0].geometry.location.lat,a=e.results[0].geometry.location.lng,l=[e.results[0].geometry.location.lat,e.results[0].geometry.location.lng],o.setView(new L.LatLng(i,a),8)}),$.getJSON("//query.yahooapis.com/v1/public/yql?q=select%20*%20from%20json%20where%20url%3D%22https%3A%2F%2Ftest%3Atest%40api.rainn.org%2Fcenters%2Fv1%2Fcenters%2Fzip%2F"+s+"%22&format=json&diagnostics=true").done(function(t){function s(e,o){var t=geolib.getDistance({latitude:i,longitude:a},{latitude:e.latitude,longitude:e.longitude}),s=geolib.getDistance({latitude:i,longitude:a},{latitude:o.latitude,longitude:o.longitude});return s>t?-1:t>s?1:0}$(".status").remove();var l=t.query.results.json.json;l.sort(s),$.each(l,function(t,s){var i=new L.marker([s.latitude,s.longitude],{icon:e,title:s.name}).on("click",function(e){$(".service").removeClass("selected"),$("#"+s.id).addClass("selected"),$(".service-locator-results").scrollTop($(".service-locator-results").scrollTop()+$("#"+s.id).position().top)}).addTo(o);$(".service-locator-results").append('<div class="service" id="'+s.id+'"></div>'),$("#"+s.id).append('<div class="service-name"><a href="'+s.url+'" target="_blank">'+s.name+'</a></div><div class="service-location">'+s.city+", "+s.state+"</div>"),s.hotline&&("null"===s.hotline||$("#"+s.id).append('<div class="service-hotline">Hotline: '+s.hotline+"</div>")),s.hotlinePhone&&$("#"+s.id).append('<div class="service-hotline">Hotline: '+s.hotlinePhone+"</div>"),s.businessPhone&&$("#"+s.id).append('<div class="service-phone">Phone: '+s.hotlinePhone+"</div>")})})}else $(".service-locator-map").prepend("<div class='status'>You did not provide a proper zipcode!</div>")})});